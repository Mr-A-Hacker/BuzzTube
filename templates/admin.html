{% extends "base.html" %}
{% block content %}

<div class="container">
  <h1 class="neon-text big-title">Admin Dashboard</h1>

  <!-- Videos management -->
  <div class="card">
    <h2 class="neon-text">Manage Videos</h2>
    {% if videos %}
      <ul class="video-list">
        {% for v in videos %}
          <li class="video-item">
            <strong>{{ v.title }}</strong> by {{ v.uploader }} | Likes: {{ v.likes }}
            <form method="post" action="{{ url_for('admin_delete_video', id=v.id) }}" style="display:inline;">
              <button type="submit" class="btn danger">Delete</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No videos found.</p>
    {% endif %}
  </div>

  <!-- Comments management -->
  <div class="card">
    <h2 class="neon-text">Manage Comments</h2>
    {% if comments %}
      <ul class="comment-list">
        {% for c in comments %}
          <li class="comment-item">
            <strong>{{ c.user }}</strong>: {{ c.text }}
            <form method="post" action="{{ url_for('admin_delete_comment', id=c.id) }}" style="display:inline;">
              <button type="submit" class="btn danger">Delete</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No comments found.</p>
    {% endif %}
  </div>

  <!-- Users management -->
  <div class="card">
    <h2 class="neon-text">Manage Users</h2>
    {% if users %}
      <ul class="user-list">
        {% for u in users %}
          <li class="user-item">
            {{ u.username }} | Premium: {{ u.premium }}
            <form method="post" action="{{ url_for('admin_grant_premium', id=u.id) }}" style="display:inline;">
              <button type="submit" class="btn">Grant Premium</button>
            </form>
            <form method="post" action="{{ url_for('admin_kick_user', id=u.id) }}" style="display:inline;">
              <button type="submit" class="btn danger">Kick</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No users found.</p>
    {% endif %}
  </div>

  <!-- Reports management -->
  <div class="card">
    <h2 class="neon-text">Reports</h2>
    {% if reports %}
      <ul class="report-list">
        {% for r in reports %}
          <li class="report-item">
            Reported by {{ r.reporter }} against {{ r.reported_user }} | Reason: {{ r.reason }} | Status: {{ r.status }}
            <form method="post" action="{{ url_for('admin_mark_report_reviewed', id=r.id) }}" style="display:inline;">
              <button type="submit" class="btn">Mark Reviewed</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No reports found.</p>
    {% endif %}
  </div>

  <!-- Navigation -->
  <div class="card">
    <a href="{{ url_for('home') }}" class="btn">Back to Home</a>
    <a href="{{ url_for('leaderboard') }}" class="btn">Leaderboard</a>
    <a href="{{ url_for('publichat') }}" class="btn">Publichat</a>
  </div>
</div>

{% endblock %}
