{% extends "base.html" %}
{% block content %}

<div class="container">
  <h1 class="neon-text big-title">Admin Dashboard</h1>

  <!-- Videos -->
  <div class="card">
    <h2 class="neon-text">Manage Videos</h2>
    {% if videos %}
      <ul>
        {% for v in videos %}
          <li>
            <strong>{{ v.title }}</strong> by {{ v.uploader }}
            <form method="post" action="{{ url_for('delete_video', id=v.id) }}" style="display:inline;">
              <button type="submit" class="btn">Delete</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No videos found.</p>
    {% endif %}
  </div>

  <!-- Comments -->
  <div class="card">
    <h2 class="neon-text">Manage Comments</h2>
    {% if comments %}
      <ul>
        {% for c in comments %}
          <li>
            <strong>{{ c.user }}</strong> on <em>{{ c.video_title }}</em>: {{ c.text }}
            <form method="post" action="{{ url_for('delete_comment', id=c.id) }}" style="display:inline;">
              <button type="submit" class="btn">Delete</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No comments found.</p>
    {% endif %}
  </div>

  <!-- Users -->
  <div class="card">
    <h2 class="neon-text">Manage Users</h2>
    {% if users %}
      <ul>
        {% for u in users %}
          <li>
            {{ u.username }}
            {% if not u.premium %}
              <form method="post" action="{{ url_for('grant_premium', id=u.id) }}" style="display:inline;">
                <button type="submit" class="btn">Grant Premium</button>
              </form>
            {% endif %}
            <form method="post" action="{{ url_for('kick_user', id=u.id) }}" style="display:inline;">
              <button type="submit" class="btn">Kick</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No users found.</p>
    {% endif %}
  </div>

  <!-- Reports -->
  <div class="card">
    <h2 class="neon-text">User Reports</h2>
    {% if reports %}
      <ul>
        {% for r in reports %}
          <li>
            <strong>{{ r.reporter }}</strong> reported <strong>{{ r.reported_user }}</strong>  
            Reason: {{ r.reason }}  
            Status: {{ r.status }}
            {% if r.status == "Pending" %}
              <form method="post" action="{{ url_for('mark_report_reviewed', id=r.id) }}" style="display:inline;">
                <button type="submit" class="btn">Mark Reviewed</button>
              </form>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No reports found.</p>
    {% endif %}
  </div>
</div>

{% endblock %}
