{% extends "base.html" %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-md-10">
    <h2 class="text-center mb-4">üõ† BuzzTub Admin Dashboard</h2>

    <!-- Manage Videos -->
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-dark text-white">Manage Videos</div>
      <div class="card-body">
        {% if videos %}
          <table class="table table-striped text-center">
            <thead>
              <tr>
                <th>Title</th>
                <th>Uploader</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for video in videos %}
              <tr>
                <td>{{ video.title }}</td>
                <td>{{ video.uploader }}</td>
                <td>
                  <form method="POST" action="{{ url_for('delete_video', id=video.id) }}" style="display:inline;">
                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                  </form>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p>No videos uploaded yet.</p>
        {% endif %}
      </div>
    </div>

    <!-- Manage Comments -->
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-dark text-white">Manage Comments</div>
      <div class="card-body">
        {% if comments %}
          <table class="table table-striped text-center">
            <thead>
              <tr>
                <th>User</th>
                <th>Comment</th>
                <th>Video</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for comment in comments %}
              <tr>
                <td>{{ comment.user }}</td>
                <td>{{ comment.text }}</td>
                <td>{{ comment.video_title }}</td>
                <td>
                  <form method="POST" action="{{ url_for('delete_comment', id=comment.id) }}" style="display:inline;">
                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                  </form>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p>No comments yet.</p>
        {% endif %}
      </div>
    </div>

    <!-- Manage Users -->
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-dark text-white">Manage Users</div>
      <div class="card-body">
        {% if users %}
          <table class="table table-striped text-center">
            <thead>
              <tr>
                <th>Username</th>
                <th>Premium</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for user in users %}
              <tr>
                <td>{{ user.username }}</td>
                <td>{% if user.premium %}‚úÖ Yes{% else %}‚ùå No{% endif %}</td>
                <td>
                  <form method="POST" action="{{ url_for('grant_premium', id=user.id) }}" style="display:inline;">
                    <button type="submit" class="btn btn-warning btn-sm">Grant Free Premium</button>
                  </form>
                  <form method="POST" action="{{ url_for('kick_user', id=user.id) }}" style="display:inline;">
                    <button type="submit" class="btn btn-danger btn-sm">Kick</button>
                  </form>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p>No users registered yet.</p>
        {% endif %}
      </div>
    </div>

  </div>
</div>
{% endblock %}
