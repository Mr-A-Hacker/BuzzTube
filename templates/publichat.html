{% extends "base.html" %}
{% block content %}

<div class="container">
  <h1 class="neon-text big-title">BuzzTube Public Chat</h1>

  <!-- Chat messages -->
  <div class="card chat-box">
    <h2 class="neon-text">Recent Messages</h2>
    {% if messages %}
      <ul class="chat-list">
        {% for m in messages %}
          {% if m.recipient %}
            {% if m.recipient == session['user'] or m.user == session['user'] %}
              <li class="chat-item private-msg">
                <strong>{{ m.user }} â @{{ m.recipient }}</strong>: {{ m.message }}
              </li>
            {% endif %}
          {% else %}
            <li class="chat-item public-msg">
              <strong>{{ m.user }}</strong>: {{ m.message }}
            </li>
          {% endif %}
        {% endfor %}
      </ul>
    {% else %}
      <p>No messages yet. Start the conversation!</p>
    {% endif %}
  </div>

  <!-- Message form -->
  <div class="card">
    <form method="post" action="{{ url_for('publicchat') }}">
      <textarea name="message" placeholder="Type your message..." required></textarea>
      <button type="submit" class="btn">Send</button>
    </form>
  </div>

  <!-- Navigation -->
  <div class="card">
    <a href="{{ url_for('home') }}" class="btn">Back to Home</a>
    <a href="{{ url_for('leaderboard') }}" class="btn">Leaderboard</a>
    <a href="{{ url_for('upload') }}" class="btn">Upload Video</a>
  </div>
</div>

{% endblock %}
