{% extends "base.html" %}
{% block content %}

<div class="container">
  <h1 class="neon-text big-title">BuzzTub Home</h1>

  <!-- Video Feed -->
  <ul class="video-list">
    {% for v in videos %}
      <li class="card">
        <!-- Video Title -->
        <h2 class="neon-text">{{ v['title'] }}</h2>
        <p class="meta">Uploaded by {{ v['uploader'] }}</p>

        <!-- Video Preview -->
        {% if v['filepath'] %}
          <video controls width="100%" style="border-radius:12px; box-shadow:0 0 20px #6600ff;" preload="metadata">
            <source src="{{ v['filepath'] }}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        {% else %}
          <p class="flash warning">No video file available.</p>
        {% endif %}

        <!-- Actions -->
        <div class="actions" style="margin-top:12px;">
          <!-- Like Button -->
          <form action="{{ url_for('like_video', id=v['id']) }}" method="POST" style="display:inline;">
            <button type="submit" class="btn">üëç Like ({{ v['likes'] }})</button>
          </form>

          <!-- Follow Button -->
          <form action="{{ url_for('follow_user', username=v['uploader']) }}" method="POST" style="display:inline;">
            <button type="submit" class="btn">‚ûï Follow {{ v['uploader'] }}</button>
          </form>

          <!-- Watch Button -->
          <a class="btn" href="{{ url_for('video', id=v['id']) }}">‚ñ∂Ô∏è Watch</a>
        </div>
      </li>
    {% else %}
      <li class="meta">No videos found. Upload one to get started!</li>
    {% endfor %}
  </ul>
</div>

{% endblock %}
